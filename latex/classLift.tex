\doxysection{Lift\texorpdfstring{$<$}{<} T \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classLift}{}\label{classLift}\index{Lift$<$ T $>$@{Lift$<$ T $>$}}


{\ttfamily \#include $<$lift.\+h$>$}

\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structLift_1_1lift__cfg__t}{lift\+\_\+cfg\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classLift_aa5723874330725dec5176ec4174e9ea8}{Lift}} (motor\+\_\+group \&lift\+\_\+motors, \mbox{\hyperlink{structLift_1_1lift__cfg__t}{lift\+\_\+cfg\+\_\+t}} \&lift\+\_\+cfg, map$<$ T, double $>$ \&setpoint\+\_\+map, limit \texorpdfstring{$\ast$}{*}homing\+\_\+switch=NULL)
\item 
void \mbox{\hyperlink{classLift_ae585cb81d733c975a65bfa7914a6bfeb}{control\+\_\+continuous}} (bool up\+\_\+ctrl, bool down\+\_\+ctrl)
\item 
void \mbox{\hyperlink{classLift_acfeaf4547de1b6a01982e8e51b0bb224}{control\+\_\+manual}} (bool up\+\_\+btn, bool down\+\_\+btn, int volt\+\_\+up, int volt\+\_\+down)
\item 
void \mbox{\hyperlink{classLift_a7197ad879474798a5c1fec4963058c3a}{control\+\_\+setpoints}} (bool up\+\_\+step, bool down\+\_\+step, vector$<$ T $>$ pos\+\_\+list)
\item 
bool \mbox{\hyperlink{classLift_ab3cb7bc86faa079ec1249b5026ea6a85}{set\+\_\+position}} (T pos)
\item 
bool \mbox{\hyperlink{classLift_a662bdc055d706699ef5cf308cd8872f8}{set\+\_\+setpoint}} (double val)
\item 
double \mbox{\hyperlink{classLift_adaa6cb65351d0c8a2c199a87a318b133}{get\+\_\+setpoint}} ()
\item 
void \mbox{\hyperlink{classLift_a9afcbf54cdd919a2c5a68f95c7a0c9e8}{hold}} ()
\item 
void \mbox{\hyperlink{classLift_ab53178b13037a4c6b1fd07657cff1f25}{home}} ()
\item 
bool \mbox{\hyperlink{classLift_a6913ab2df38f0429641c256ec9288370}{get\+\_\+async}} ()
\item 
void \mbox{\hyperlink{classLift_a7f37703180518390ec38cba9a780282b}{set\+\_\+async}} (bool val)
\item 
void \mbox{\hyperlink{classLift_a08b7cdcfc9390f4945dd3737ac0e5ddc}{set\+\_\+sensor\+\_\+function}} (double(\texorpdfstring{$\ast$}{*}fn\+\_\+ptr)(void))
\item 
void \mbox{\hyperlink{classLift_a70b8e7cff5cd3b5827d8da07a02d92e6}{set\+\_\+sensor\+\_\+reset}} (void(\texorpdfstring{$\ast$}{*}fn\+\_\+ptr)(void))
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename T$>$\newline
class Lift$<$ T $>$}
LIFT A general class for lifts (e.\+g. 4bar, dr4bar, linear, etc) Uses a \doxylink{classPID}{PID} to hold the lift at a certain height under load, and to move the lift to different heights

\begin{DoxyAuthor}{Author}
Ryan Mc\+Gee 
\end{DoxyAuthor}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classLift_aa5723874330725dec5176ec4174e9ea8}\label{classLift_aa5723874330725dec5176ec4174e9ea8} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!Lift@{Lift}}
\index{Lift@{Lift}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{Lift()}{Lift()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
\mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\mbox{\hyperlink{classLift}{\+::\+Lift}} (\begin{DoxyParamCaption}\item[{motor\+\_\+group \&}]{lift\+\_\+motors,  }\item[{\mbox{\hyperlink{structLift_1_1lift__cfg__t}{lift\+\_\+cfg\+\_\+t}} \&}]{lift\+\_\+cfg,  }\item[{map$<$ T, double $>$ \&}]{setpoint\+\_\+map,  }\item[{limit \texorpdfstring{$\ast$}{*}}]{homing\+\_\+switch = {\ttfamily NULL} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Construct the \doxylink{classLift}{Lift} object and begin the background task that controls the lift.

Usage example\+: /code\{.cpp\} enum Positions \{UP, MID, DOWN\}; map$<$\+Positions, double$>$ setpt\+\_\+map \{ \{DOWN, 0.\+0\}, \{MID, 0.\+5\}, \{UP, 1.\+0\} \}; Lift$<$\+Positions$>$ my\+\_\+lift(motors, lift\+\_\+cfg, setpt\+\_\+map); /endcode


\begin{DoxyParams}{Parameters}
{\em lift\+\_\+motors} & A set of motors, all set that positive rotation correlates with the lift going up \\
\hline
{\em lift\+\_\+cfg} & \doxylink{classLift}{Lift} characterization information; \doxylink{classPID}{PID} tunings and movement speeds \\
\hline
{\em setpoint\+\_\+map} & A map of enum type T, in which each enum entry corresponds to a different lift height \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{classLift_ae585cb81d733c975a65bfa7914a6bfeb}\label{classLift_ae585cb81d733c975a65bfa7914a6bfeb} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!control\_continuous@{control\_continuous}}
\index{control\_continuous@{control\_continuous}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{control\_continuous()}{control\_continuous()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::control\+\_\+continuous (\begin{DoxyParamCaption}\item[{bool}]{up\+\_\+ctrl,  }\item[{bool}]{down\+\_\+ctrl }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Control the lift with an "{}up"{} button and a "{}down"{} button. Use \doxylink{classPID}{PID} to hold the lift when letting go. 
\begin{DoxyParams}{Parameters}
{\em up\+\_\+ctrl} & Button controlling the "{}\+UP"{} motion \\
\hline
{\em down\+\_\+ctrl} & Button controlling the "{}\+DOWN"{} motion \\
\hline
\end{DoxyParams}
\Hypertarget{classLift_acfeaf4547de1b6a01982e8e51b0bb224}\label{classLift_acfeaf4547de1b6a01982e8e51b0bb224} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!control\_manual@{control\_manual}}
\index{control\_manual@{control\_manual}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{control\_manual()}{control\_manual()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::control\+\_\+manual (\begin{DoxyParamCaption}\item[{bool}]{up\+\_\+btn,  }\item[{bool}]{down\+\_\+btn,  }\item[{int}]{volt\+\_\+up,  }\item[{int}]{volt\+\_\+down }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Control the lift with manual controls (no holding voltage)


\begin{DoxyParams}{Parameters}
{\em up\+\_\+btn} & Raise the lift when true \\
\hline
{\em down\+\_\+btn} & Lower the lift when true \\
\hline
{\em volt\+\_\+up} & Motor voltage when raising the lift \\
\hline
{\em volt\+\_\+down} & Motor voltage when lowering the lift \\
\hline
\end{DoxyParams}
\Hypertarget{classLift_a7197ad879474798a5c1fec4963058c3a}\label{classLift_a7197ad879474798a5c1fec4963058c3a} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!control\_setpoints@{control\_setpoints}}
\index{control\_setpoints@{control\_setpoints}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{control\_setpoints()}{control\_setpoints()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::control\+\_\+setpoints (\begin{DoxyParamCaption}\item[{bool}]{up\+\_\+step,  }\item[{bool}]{down\+\_\+step,  }\item[{vector$<$ T $>$}]{pos\+\_\+list }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Control the lift in "{}steps"{}. When the "{}up"{} button is pressed, the lift will go to the next position as defined by pos\+\_\+list. Order matters!


\begin{DoxyParams}{Parameters}
{\em up\+\_\+step} & A button that increments the position of the lift. \\
\hline
{\em down\+\_\+step} & A button that decrements the position of the lift. \\
\hline
{\em pos\+\_\+list} & A list of positions for the lift to go through. The higher the index, the higher the lift should be (generally). \\
\hline
\end{DoxyParams}
\Hypertarget{classLift_a6913ab2df38f0429641c256ec9288370}\label{classLift_a6913ab2df38f0429641c256ec9288370} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!get\_async@{get\_async}}
\index{get\_async@{get\_async}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{get\_async()}{get\_async()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
bool \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::get\+\_\+async (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
whether or not the background thread is running the lift 
\end{DoxyReturn}
\Hypertarget{classLift_adaa6cb65351d0c8a2c199a87a318b133}\label{classLift_adaa6cb65351d0c8a2c199a87a318b133} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!get\_setpoint@{get\_setpoint}}
\index{get\_setpoint@{get\_setpoint}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{get\_setpoint()}{get\_setpoint()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
double \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::get\+\_\+setpoint (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

\begin{DoxyReturn}{Returns}
The current setpoint for the lift 
\end{DoxyReturn}
\Hypertarget{classLift_a9afcbf54cdd919a2c5a68f95c7a0c9e8}\label{classLift_a9afcbf54cdd919a2c5a68f95c7a0c9e8} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!hold@{hold}}
\index{hold@{hold}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{hold()}{hold()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::hold (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Target the class\textquotesingle{}s setpoint. Calculate the \doxylink{classPID}{PID} output and set the lift motors accordingly. \Hypertarget{classLift_ab53178b13037a4c6b1fd07657cff1f25}\label{classLift_ab53178b13037a4c6b1fd07657cff1f25} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!home@{home}}
\index{home@{home}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{home()}{home()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::home (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

A blocking function that automatically homes the lift based on a sensor or hard stop, and sets the position to 0. A watchdog times out after 3 seconds, to avoid damage. \Hypertarget{classLift_a7f37703180518390ec38cba9a780282b}\label{classLift_a7f37703180518390ec38cba9a780282b} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!set\_async@{set\_async}}
\index{set\_async@{set\_async}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_async()}{set\_async()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::set\+\_\+async (\begin{DoxyParamCaption}\item[{bool}]{val }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Enables or disables the background task. Note that running the control functions, or set\+\_\+position functions will immediately re-\/enable the task for autonomous use. 
\begin{DoxyParams}{Parameters}
{\em val} & Whether or not the background thread should run the lift \\
\hline
\end{DoxyParams}
\Hypertarget{classLift_ab3cb7bc86faa079ec1249b5026ea6a85}\label{classLift_ab3cb7bc86faa079ec1249b5026ea6a85} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!set\_position@{set\_position}}
\index{set\_position@{set\_position}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_position()}{set\_position()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
bool \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::set\+\_\+position (\begin{DoxyParamCaption}\item[{T}]{pos }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Enable the background task, and send the lift to a position, specified by the setpoint map from the constructor.


\begin{DoxyParams}{Parameters}
{\em pos} & A lift position enum type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the pid has reached the setpoint 
\end{DoxyReturn}
\Hypertarget{classLift_a08b7cdcfc9390f4945dd3737ac0e5ddc}\label{classLift_a08b7cdcfc9390f4945dd3737ac0e5ddc} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!set\_sensor\_function@{set\_sensor\_function}}
\index{set\_sensor\_function@{set\_sensor\_function}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_sensor\_function()}{set\_sensor\_function()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::set\+\_\+sensor\+\_\+function (\begin{DoxyParamCaption}\item[{double(\texorpdfstring{$\ast$}{*})(void)}]{fn\+\_\+ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Creates a custom hook for any other type of sensor to be used on the lift. Example\+: /code\{.cpp\} my\+\_\+lift.\+set\+\_\+sensor\+\_\+function( \mbox{[}\mbox{]}()\{return my\+\_\+sensor.\+position();\} ); /endcode


\begin{DoxyParams}{Parameters}
{\em fn\+\_\+ptr} & Pointer to custom sensor function \\
\hline
\end{DoxyParams}
\Hypertarget{classLift_a70b8e7cff5cd3b5827d8da07a02d92e6}\label{classLift_a70b8e7cff5cd3b5827d8da07a02d92e6} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!set\_sensor\_reset@{set\_sensor\_reset}}
\index{set\_sensor\_reset@{set\_sensor\_reset}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_sensor\_reset()}{set\_sensor\_reset()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
void \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::set\+\_\+sensor\+\_\+reset (\begin{DoxyParamCaption}\item[{void(\texorpdfstring{$\ast$}{*})(void)}]{fn\+\_\+ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Creates a custom hook to reset the sensor used in \doxylink{classLift_a08b7cdcfc9390f4945dd3737ac0e5ddc}{set\+\_\+sensor\+\_\+function()}. Example\+: /code\{.cpp\} my\+\_\+lift.\+set\+\_\+sensor\+\_\+reset( my\+\_\+sensor.\+reset\+Position ); /endcode \Hypertarget{classLift_a662bdc055d706699ef5cf308cd8872f8}\label{classLift_a662bdc055d706699ef5cf308cd8872f8} 
\index{Lift$<$ T $>$@{Lift$<$ T $>$}!set\_setpoint@{set\_setpoint}}
\index{set\_setpoint@{set\_setpoint}!Lift$<$ T $>$@{Lift$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{set\_setpoint()}{set\_setpoint()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
bool \mbox{\hyperlink{classLift}{Lift}}$<$ T $>$\+::set\+\_\+setpoint (\begin{DoxyParamCaption}\item[{double}]{val }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Manually set a setpoint value for the lift \doxylink{classPID}{PID} to go to. 
\begin{DoxyParams}{Parameters}
{\em val} & \doxylink{classLift}{Lift} setpoint, in motor revolutions or sensor units defined by get\+\_\+sensor. Cannot be outside the softstops. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the pid has reached the setpoint 
\end{DoxyReturn}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/subsystems/lift.\+h\end{DoxyCompactItemize}
